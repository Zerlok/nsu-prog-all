#!/bin/bash
# Compile project *.o files with custom code with Google Test.
# It uses other 'int main(...)', that's why main.o file is skipped.

arr=(*.o)
sources=()

for f in "${arr[@]}"; do
	if [ "$f" != "main.o" ]; then
		sources+=($f)
	fi
done

g++ $1 "${sources[@]}" -o gtest -lgtest -lpthread
